# 내장함수와 변수 구현하기(Base Context)

Base Context 기능을 활용하면 학습에 유용하거나 기능 구현에 필요한 함수(약속과 번역)를 미리 제공할 수 있습니다. 이는 다른 프로그래밍 언어의 내장함수와 유사합니다. Base Context는 다음의 단계로 구현됩니다.

## 1. 내장함수와 변수가 담긴 소스코드의 실행결과를 저장해두기

```ts
const baseCode = `
약속, 힘든 부탁 하기
    "그건 제가 도와드릴 수 없어요" 보여주기
`

const baseContext: CodeFile = (await yaksok(baseCode)).codeFiles['main']
```

학습자에게 제공할 내장함수와 변수를 담은 소스코드를 실행해서 변수로 저장합니다. `yaksok` 함수의 실행 결과중, codeFile 객체가 필요합니다. 반환값의 codeFiles 객체엔 파일 이름별로 codeFile 객체가 저장되어 있으며, 파일 이름을 별도로 지정하지 않는 경우엔 `main`이라는 이름으로 접근합니다.

## 2. yaksok 함수에 전달하기

```ts
await yaksok(`힘든 부탁 하기`, {}, baseContext)
```

codeFile 객체를 `yaksok` 함수의 세 번째 인자로 넘기면 baseContext에서 실행이 완료된 약속과 변수를 재사용할 수 있습니다.

## 전체 소스코드

```ts
const baseCode = `
약속, 힘든 부탁 하기
    "그건 제가 도와드릴 수 없어요" 보여주기
`

const baseContext: CodeFile = (await yaksok(baseCode)).codeFiles['main']

await yaksok(`힘든 부탁 하기`, {}, baseContext)
```

## 주의 사항: 스코프는 재사용됩니다

```ts
const baseCode = `
카운터 = 1

약속, 카운터 증가
    카운터 = 카운터 + 1
`

// ...

yaksok(
    `
카운터 증가
카운터 증가
`,
    {},
    baseContext,
)

yaksok(
    `
카운터 보여주기
`,
    {},
    baseContext,
)
```

위 경우 `baseContext` 내 스코프에 있는 카운터 변수가 재사용되어, `3`이 출력됩니다.
