---
title: "3.1. Machine Readable Errors"
---

# Machine Readable Error ì¶œë ¥

## ê°œìš”

ë‹¬ë¹› ì•½ì†ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ëžŒì´ ì½ê¸° ì‰¬ìš´ í˜•ì‹(Human Readable)ìœ¼ë¡œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. ì´ì™€ ë™ì‹œì— **Machine Readable** í˜•ì‹(JSON)ì˜ êµ¬ì¡°í™”ëœ ì—ëŸ¬ ì •ë³´ë„ ì œê³µí•©ë‹ˆë‹¤.

stderr ì½œë°±ì˜ **ì²« ë²ˆì§¸ ì¸ìž**ëŠ” Human Readable í˜•ì‹ì´ê³ , **ë‘ ë²ˆì§¸ ì¸ìž**ëŠ” Machine Readable í˜•ì‹ìž…ë‹ˆë‹¤.

## ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì˜ˆì œ

```typescript
import { YaksokSession, MachineReadableError } from '@dalbit-yaksok/core'

const session = new YaksokSession({
    stderr: (humanReadable: string, machineReadable: MachineReadableError) => {
        // ì²« ë²ˆì§¸ ì¸ìž: ì‚¬ëžŒì´ ì½ê¸° ì‰¬ìš´ í˜•ì‹
        console.error(humanReadable)
        
        // ë‘ ë²ˆì§¸ ì¸ìž: êµ¬ì¡°í™”ëœ ì˜¤ë¸Œì íŠ¸ í˜•ì‹ (ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥, JSON íŒŒì‹± ë¶ˆí•„ìš”!)
        console.log(machineReadable.message)
        console.log(machineReadable.position)
    }
})

session.addModule('main', 'ì •ì˜ë˜ì§€ì•Šì€ë³€ìˆ˜ ë³´ì—¬ì£¼ê¸°')
await session.runModule('main')
```

## ì¶œë ¥ í˜•ì‹ ë¹„êµ

### Human Readable í˜•ì‹ (ì²« ë²ˆì§¸ ì¸ìž)

```
â”€â”€â”€â”€â”€

ðŸš¨  ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš” ðŸš¨
1ë²ˆì§¸ ì¤„ì˜ 1ë²ˆì§¸ ê¸€ìž

> ë³€ìˆ˜ 'ì •ì˜ë˜ì§€ì•Šì€ë³€ìˆ˜'ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

â”Œâ”€â”€â”€â”€â”€
â”‚  1  ì •ì˜ë˜ì§€ì•Šì€ë³€ìˆ˜ ë³´ì—¬ì£¼ê¸°
â”‚       ^
â””â”€â”€â”€â”€â”€
```

### Machine Readable í˜•ì‹ (ë‘ ë²ˆì§¸ ì¸ìž, JSON)

[`/core/interfaces/MachineReadableError`](/api/core/mod/interfaces/MachineReadableError) íŽ˜ì´ì§€ì—ì„œ ë” ìžì„¸ížˆ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```json
{
  "type": "error",
  "message": "ë³€ìˆ˜ 'ì •ì˜ë˜ì§€ì•Šì€ë³€ìˆ˜'ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.",
  "position": {
    "line": 1,
    "column": 1
  },
  "fileName": "main",
  "context": {
    "startLine": 1,
    "endLine": 1
  },
  "child"?: // Child error..
}
```


## ì‚¬ìš© ì‚¬ë¡€

### 1. IDE í”ŒëŸ¬ê·¸ì¸ ê°œë°œ

ì—ëŸ¬ ì •ë³´ë¥¼ êµ¬ì¡°í™”ëœ í˜•ì‹ìœ¼ë¡œ ë°›ì•„ IDEì— í‘œì‹œí•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```typescript
const session = new YaksokSession({
    stderr: (humanReadable, machineReadable) => {
        // ì‚¬ìš©ìžì—ê²ŒëŠ” ì½ê¸° ì‰¬ìš´ í˜•ì‹ í‘œì‹œ
        console.error(humanReadable)
        
        // êµ¬ì¡°í™”ëœ ì˜¤ë¸Œì íŠ¸ë¥¼ ì§ì ‘ ì‚¬ìš©
        showDiagnostic({
            file: machineReadable.fileName,
            line: machineReadable.position?.line,
            column: machineReadable.position?.column,
            message: machineReadable.message,
        })
    }
})
```

### 2. CI/CD íŒŒì´í”„ë¼ì¸

ìžë™í™”ëœ ë¹Œë“œ ì‹œìŠ¤í…œì—ì„œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```typescript
const session = new YaksokSession({
    stderr: (humanReadable, machineReadable) => {
        // ì—ëŸ¬ ë¡œê¹… ì‹œìŠ¤í…œì— ë³´ë‚´ê¸°
        logError({
            timestamp: new Date().toISOString(),
            file: machineReadable.fileName,
            position: machineReadable.position,
            message: machineReadable.message,
        })
    }
})
```

### 3. íŽ¸ì§‘ê¸°/ì»´íŒŒì¼ëŸ¬ ê°œë°œ

ì–¸ì–´ ì„œë²„ë‚˜ ì»´íŒŒì¼ëŸ¬ì—ì„œ êµ¬ì¡°í™”ëœ ì—ëŸ¬ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```typescript
const errors: MachineReadableError[] = []

const session = new YaksokSession({
    stderr: (humanReadable, machineReadable) => {
        errors.push(machineReadable)
    }
})

// ëª¨ë“  ì—ëŸ¬ ì²˜ë¦¬
session.addModule('main', sourceCode)
await session.runModule('main')

// ì—ëŸ¬ ëª©ë¡ì„ ë‹¤ë¥¸ ë„êµ¬ë¡œ ì „ì†¡
sendErrorsToAnalyzer(errors)
```

## ì£¼ì˜ì‚¬í•­

- ë‘ ë²ˆì§¸ ì¸ìž(`machineReadable`)ëŠ” í•­ìƒ ì œê³µë©ë‹ˆë‹¤ (í•„ìˆ˜ ì¸ìž)
- Machine Readableì€ ì˜¤ë¸Œì íŠ¸ë¡œ ì „ë‹¬ë˜ë¯€ë¡œ JSON íŒŒì‹±ì´ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤
- ëª¨ë“  ANSI í¬ë§¤íŒ… ì½”ë“œê°€ ì œê±°ë˜ë¯€ë¡œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤
- TypeScriptì—ì„œ `MachineReadableError` íƒ€ìž…ìœ¼ë¡œ íƒ€ìž… ì•ˆì •ì„±ì„ ì–»ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤

## ì˜ˆì œ ì½”ë“œ

### ì „ì²´ ì˜ˆì œ

```typescript
import { YaksokSession, type MachineReadableError } from '@dalbit-yaksok/core'

async function runWithErrorHandling() {
    const errors: MachineReadableError[] = []

    const session = new YaksokSession({
        stderr: (humanReadable: string, machineReadable: MachineReadableError) => {
            // ë¡œê·¸ì—ëŠ” ì½ê¸° ì‰¬ìš´ í˜•ì‹ ì €ìž¥
            console.error('[USER]', humanReadable)
            
            // êµ¬ì¡°í™”ëœ ì˜¤ë¸Œì íŠ¸ë¥¼ ì§ì ‘ ì €ìž¥ (íŒŒì‹± ë¶ˆí•„ìš”!)
            errors.push(machineReadable)
            console.error('[MACHINE]', JSON.stringify(machineReadable))
        }
    })

    session.addModule('main', `
        ì •ì˜ë˜ì§€ì•Šì€ë³€ìˆ˜ ë³´ì—¬ì£¼ê¸°
    `)

    const result = await session.runModule('main')

    return {
        result,
        errors
    }
}

// ì‹¤í–‰
const { result, errors } = await runWithErrorHandling()
console.log(`\nTotal errors: ${errors.length}`)
errors.forEach((err, i) => {
    console.log(`Error ${i + 1}: ${err.message}`)
    if (err.position) {
        console.log(`  at line ${err.position.line}, column ${err.position.column}`)
    }
})
```
