# 설계도: 1단계 (토크나이저) - 7. 문자열 리터럴 토큰화 테스트 및 구현

**목표:** `Lexer`가 큰따옴표(`"`)로 둘러싸인 문자열을 단일 `STRING` 타입 토큰으로 인식하고, 따옴표를 제외한 내부 문자열을 리터럴 값으로 갖는 토큰을 생성하도록 합니다. (이스케이프 시퀀스는 이 단계에서 다루지 않습니다.)

**이행 절차:**

1.  **`readString()` 헬퍼 메서드 작성:**
    *   작업: `interpreter/lexer.go`에 `readString() (string, bool)` 메서드를 작성합니다. 두 번째 반환값은 문자열이 정상적으로 종료되었는지 여부입니다.
        *   이 메서드는 `l.ch`가 현재 시작 따옴표(`"`)라고 가정하고 호출됩니다.
        *   `l.readChar()`를 호출하여 시작 따옴표 다음 문자로 이동합니다. (`string`을 기록할 `position` 저장)
        *   다음 큰따옴표(`"`)를 만나거나 EOF에 도달할 때까지 문자들을 읽습니다. (`l.readChar()` 반복 호출)
        *   종료 따옴표를 만나면:
            *   시작 따옴표 다음부터 종료 따옴표 이전까지의 문자열 부분을 추출하여 반환합니다.
            *   `l.readChar()`를 호출하여 종료 따옴표 다음으로 `l.ch`를 이동시킵니다.
            *   `true` (정상 종료)를 함께 반환합니다.
        *   EOF를 먼저 만나면 (닫는 따옴표가 없는 경우):
            *   시작 따옴표 다음부터 EOF 이전까지 읽은 문자열 부분을 추출하여 반환합니다.
            *   `false` (비정상 종료)를 함께 반환합니다. (`l.ch`는 이미 EOF(0) 상태)
    *   확인: `readString`이 따옴표 사이의 내용을 정확히 추출하고, 호출 후 `Lexer`의 `ch`가 닫는 따옴표 바로 다음 문자를 가리키는지 (정상 종료 시) 또는 EOF 상태인지 (비정상 종료 시) 확인합니다.
2.  **`NextToken()` 메서드에 문자열 처리 로직 추가:**
    *   작업: `interpreter/lexer.go`의 `NextToken()` 함수 내 `switch l.ch` 문에 `case '"':`를 추가합니다.
        *   이 `case`에서는 `l.readString()`을 호출하여 문자열 리터럴과 종료 상태를 얻습니다.
        *   종료 상태가 `true` (정상)이면 `STRING` 타입의 토큰을 생성합니다.
        *   종료 상태가 `false` (비정상)이면 `ILLEGAL` 타입의 토큰을 생성하고, 리터럴은 읽은 부분까지로 합니다.
        *   토큰 생성 후 바로 `return tok` 합니다. (`readString`이 `l.ch`를 다음 위치로 옮겼으므로)
    *   확인: `NextToken`이 `"` 문자를 만나면 문자열 토큰을 올바르게 생성하고, 닫는 따옴표가 없는 경우 `ILLEGAL`로 처리하는지 확인합니다.
3.  **문자열 리터럴 토큰화 테스트 케이스 작성 및 실행:**
    *   작업: `interpreter/lexer_test.go`에 `TestNextToken_Strings` 테스트 함수를 작성합니다. 다음 케이스들을 포함합니다:
        *   입력: `"\"hello world\""` -> 예상: `STRING("hello world")`, `EOF("")`
        *   입력: `"\"\""` (빈 문자열) -> 예상: `STRING("")`, `EOF("")`
        *   입력: `"\"여기는 한글 문자열\""` -> 예상: `STRING("여기는 한글 문자열")`, `EOF("")`
        *   입력: `"\"문자열1\" \"문자열2\""` -> 예상: `STRING("문자열1")`, `STRING("문자열2")`, `EOF("")`
        *   입력: `"\"unterminated string"` -> 예상: `ILLEGAL("unterminated string")`, `EOF("")`
    *   확인: 테스트가 다양한 문자열 입력에 대해 올바른 `STRING` 또는 `ILLEGAL` 토큰과 리터럴 값을 생성하는지 확인합니다.
4.  **모든 관련 테스트 실행 (성공 확인):**
    *   작업: `go test -v yak/interpreter` 명령으로 모든 `Lexer` 테스트를 실행합니다.
    *   확인: 새로 추가된 문자열 처리 테스트 및 기존의 모든 테스트가 성공적으로 통과하는지 확인합니다.
